module.exports=[65447,a=>{"use strict";var b=a.i(7991),c=a.i(45666),d=a.i(34038),e=a.i(54251),f=a.i(10006),g=a.i(98927),h=a.i(47776),i=a.i(94890);let j=(0,i.default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var k=a.i(24568),l=a.i(35039),m=a.i(60554),n=a.i(80237),o=a.i(72209),p=a.i(57656),q=a.i(38762),r=a.i(81942);function s(){let{user:a}=(0,f.useAuth)(),[i,s]=(0,r.useState)(null),[t,u]=(0,r.useState)(!0),v=(0,g.createClient)();return((0,r.useEffect)(()=>{!async function(){if(!a)return;let{data:b,error:c}=await v.from("player_cards").select("*, games(name)").eq("player_id",a.id).single();b&&s(b),u(!1)}()},[a,v]),t)?(0,b.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,b.jsx)("div",{className:"h-32 rounded-xl bg-white/5"}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsx)("div",{className:"h-40 rounded-xl bg-white/5"}),(0,b.jsx)("div",{className:"h-40 rounded-xl bg-white/5"})]})]}):i?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between rounded-xl border border-white/10 bg-gradient-to-r from-primary/20 to-accent/20 p-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h1",{className:"text-2xl font-bold text-white",children:["Welcome back, ",i.ign,"!"]}),(0,b.jsx)("p",{className:"text-white/80",children:"Ready to find your next team?"})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(q.default,{href:`/player/${a?.id}`,children:(0,b.jsxs)(d.Button,{variant:"outline",className:"border-white/20 bg-white/10 hover:bg-white/20",children:[(0,b.jsx)(o.User,{className:"mr-2 h-4 w-4"}),"Public Profile"]})}),(0,b.jsx)(q.default,{href:"/profile/create",children:(0,b.jsxs)(d.Button,{variant:"outline",className:"border-white/20 bg-white/10 hover:bg-white/20",children:[(0,b.jsx)(j,{className:"mr-2 h-4 w-4"}),"Edit Profile"]})})]})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,b.jsxs)(e.Card,{className:"border-white/10 bg-white/5 backdrop-blur-md",children:[(0,b.jsxs)(e.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(e.CardTitle,{className:"text-sm font-medium",children:"K/D Ratio"}),(0,b.jsx)(m.Swords,{className:"h-4 w-4 text-accent"})]}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:i.kd_ratio}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Lifetime stats"})]})]}),(0,b.jsxs)(e.Card,{className:"border-white/10 bg-white/5 backdrop-blur-md",children:[(0,b.jsxs)(e.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(e.CardTitle,{className:"text-sm font-medium",children:"Avg Damage"}),(0,b.jsx)(h.Crosshair,{className:"h-4 w-4 text-primary"})]}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:i.avg_damage}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Per match"})]})]}),(0,b.jsxs)(e.Card,{className:"border-white/10 bg-white/5 backdrop-blur-md",children:[(0,b.jsxs)(e.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(e.CardTitle,{className:"text-sm font-medium",children:"Primary Role"}),(0,b.jsx)(k.Gamepad2,{className:"h-4 w-4 text-green-500"})]}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:i.primary_role}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:i.secondary_role?`+ ${i.secondary_role}`:"No secondary"})]})]}),(0,b.jsxs)(e.Card,{className:"border-white/10 bg-white/5 backdrop-blur-md",children:[(0,b.jsxs)(e.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(e.CardTitle,{className:"text-sm font-medium",children:"Experience"}),(0,b.jsx)(n.Trophy,{className:"h-4 w-4 text-yellow-500"})]}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsxs)("div",{className:"text-2xl font-bold",children:[i.experience_years||0," Years"]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Competitive play"})]})]})]}),(0,b.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,b.jsxs)(e.Card,{className:"border-white/10 bg-white/5 backdrop-blur-md",children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsx)(e.CardTitle,{children:"Achievements"})}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:i.achievements&&i.achievements.length>0?i.achievements.map((a,d)=>(0,b.jsxs)(c.Badge,{variant:"secondary",className:"bg-yellow-500/10 text-yellow-500 hover:bg-yellow-500/20",children:[(0,b.jsx)(n.Trophy,{className:"mr-1 h-3 w-3"}),a]},d)):(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"No achievements added yet."})})})]}),(0,b.jsxs)(e.Card,{className:"border-white/10 bg-white/5 backdrop-blur-md",children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsx)(e.CardTitle,{children:"Socials & Info"})}),(0,b.jsxs)(e.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[i.socials?.discord&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsx)("div",{className:"rounded-full bg-[#5865F2]/20 p-2 text-[#5865F2]",children:(0,b.jsx)(k.Gamepad2,{className:"h-4 w-4"})}),(0,b.jsx)("span",{children:i.socials.discord})]}),i.socials?.instagram&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsx)("div",{className:"rounded-full bg-[#E1306C]/20 p-2 text-[#E1306C]",children:(0,b.jsx)(l.Instagram,{className:"h-4 w-4"})}),(0,b.jsx)("span",{children:i.socials.instagram})]}),i.socials?.youtube&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsx)("div",{className:"rounded-full bg-[#FF0000]/20 p-2 text-[#FF0000]",children:(0,b.jsx)(p.Youtube,{className:"h-4 w-4"})}),(0,b.jsx)("a",{href:i.socials.youtube,target:"_blank",rel:"noreferrer",className:"hover:underline",children:"Channel"})]})]}),(0,b.jsxs)("div",{className:"border-t border-white/10 pt-4",children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Device:"}),(0,b.jsx)("span",{children:i.device_model||"Not specified"})]}),(0,b.jsxs)("div",{className:"flex justify-between text-sm mt-2",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Availability:"}),(0,b.jsx)("span",{children:i.availability||"Not specified"})]})]})]})]})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsx)(q.default,{href:"/tryouts",children:(0,b.jsx)(e.Card,{className:"group cursor-pointer border-white/10 bg-gradient-to-br from-primary/10 to-transparent transition-all hover:border-primary/50",children:(0,b.jsxs)(e.CardContent,{className:"flex items-center justify-between p-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-primary group-hover:underline",children:"Browse Tryouts"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Find teams looking for players like you."})]}),(0,b.jsx)(m.Swords,{className:"h-8 w-8 text-primary opacity-50 transition-opacity group-hover:opacity-100"})]})})}),(0,b.jsx)(q.default,{href:"/applications",children:(0,b.jsx)(e.Card,{className:"group cursor-pointer border-white/10 bg-gradient-to-br from-accent/10 to-transparent transition-all hover:border-accent/50",children:(0,b.jsxs)(e.CardContent,{className:"flex items-center justify-between p-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-accent group-hover:underline",children:"My Applications"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Check the status of your applications."})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"absolute -right-1 -top-1 h-3 w-3 animate-ping rounded-full bg-accent opacity-50"}),(0,b.jsx)("div",{className:"h-3 w-3 rounded-full bg-accent"})]})]})})})]})]}):(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-4 rounded-xl border border-dashed border-white/10 bg-white/5 p-8 text-center",children:[(0,b.jsx)("div",{className:"rounded-full bg-primary/10 p-4",children:(0,b.jsx)(k.Gamepad2,{className:"h-8 w-8 text-primary"})}),(0,b.jsx)("h2",{className:"text-xl font-bold",children:"Create Your Player Card"}),(0,b.jsx)("p",{className:"max-w-md text-muted-foreground",children:"To start applying for teams, you need to set up your player profile with your stats and roles."}),(0,b.jsx)(q.default,{href:"/profile/create",children:(0,b.jsx)(d.Button,{children:"Create Profile"})})]})}let t=(0,i.default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var u=a.i(12957),v=a.i(91683),w=a.i(1292);function x(){let{user:a}=(0,f.useAuth)(),[h,i]=(0,r.useState)(null),[j,l]=(0,r.useState)({activeRecruitments:0,pendingApplications:0}),[m,o]=(0,r.useState)({}),[p,s]=(0,r.useState)(!0),x=(0,g.createClient)();return((0,r.useEffect)(()=>{!async function(){if(a)try{let{data:b,error:c}=await x.from("teams").select("*").eq("owner_id",a.id).single();if(c&&"PGRST116"!==c.code&&console.error("Error fetching team:",c),b){i(b);let{count:a}=await x.from("recruitments").select("*",{count:"exact",head:!0}).eq("team_id",b.id).eq("status","open"),{data:c}=await x.from("recruitments").select("id, games(name)").eq("team_id",b.id),d=0;if(c&&c.length>0){let a=c.map(a=>a.id),{count:b}=await x.from("recruitment_applications").select("*",{count:"exact",head:!0}).in("recruitment_id",a).eq("status","pending");d=b||0;let{data:e}=await x.from("recruitment_applications").select("*, player_cards(*)").in("recruitment_id",a).eq("status","accepted");if(e){let a={};e.forEach(b=>{let d=c.find(a=>a.id===b.recruitment_id),e=d?.games?.name||"Unknown Game";a[e]||(a[e]=[]),b.player_cards&&a[e].push({player_id:b.player_cards.player_id,ign:b.player_cards.ign,primary_role:b.player_cards.primary_role,kd_ratio:b.player_cards.kd_ratio,avg_damage:b.player_cards.avg_damage,game_name:e})}),o(a)}}l({activeRecruitments:a||0,pendingApplications:d})}}catch(a){console.error("Error:",a)}finally{s(!1)}}()},[a,x]),p)?(0,b.jsx)("div",{className:"text-muted-foreground",children:"Loading team data..."}):h?(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h2",{className:"text-3xl font-bold tracking-tight text-primary",children:[h.name," Dashboard ðŸ†"]}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Manage your roster and find the best talent."})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(d.Button,{asChild:!0,variant:"outline",className:"gap-2",children:(0,b.jsxs)(q.default,{href:`/team/${h.id}`,children:[(0,b.jsx)(w.Users,{className:"h-4 w-4"}),"Public Page"]})}),(0,b.jsx)(d.Button,{asChild:!0,variant:"outline",className:"gap-2",children:(0,b.jsx)(q.default,{href:"/team/settings",children:"Edit Team"})})]})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,b.jsxs)(e.Card,{className:"border-white/10 bg-white/5 backdrop-blur-md",children:[(0,b.jsxs)(e.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(e.CardTitle,{className:"text-sm font-medium",children:"Active Recruitments"}),(0,b.jsx)(w.Users,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-primary",children:j.activeRecruitments}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Open positions"})]})]}),(0,b.jsxs)(e.Card,{className:"border-white/10 bg-white/5 backdrop-blur-md",children:[(0,b.jsxs)(e.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(e.CardTitle,{className:"text-sm font-medium",children:"Pending Applications"}),(0,b.jsx)(u.ClipboardList,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-accent",children:j.pendingApplications}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Waiting for review"})]})]}),(0,b.jsxs)(e.Card,{className:"border-white/10 bg-white/5 backdrop-blur-md",children:[(0,b.jsxs)(e.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(e.CardTitle,{className:"text-sm font-medium",children:"Team Tier"}),(0,b.jsx)(n.Trophy,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold capitalize",children:h.tier}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:h.region})]})]})]}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("h3",{className:"text-xl font-semibold text-white",children:"Active Roster"}),Object.keys(m).length>0?Object.entries(m).map(([a,d])=>(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(c.Badge,{variant:"outline",className:"bg-primary/10 text-primary border-primary/20",children:[(0,b.jsx)(k.Gamepad2,{className:"mr-1 h-3 w-3"}),a]}),(0,b.jsxs)("span",{className:"text-sm text-muted-foreground",children:[d.length," Players"]})]}),(0,b.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:d.map(a=>(0,b.jsxs)(e.Card,{className:"border-white/10 bg-white/5 backdrop-blur-md",children:[(0,b.jsxs)(e.CardHeader,{className:"flex flex-row items-center gap-4",children:[(0,b.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-primary/20",children:(0,b.jsx)(w.Users,{className:"h-5 w-5 text-primary"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)(e.CardTitle,{className:"text-base",children:a.ign}),(0,b.jsx)(e.CardDescription,{children:a.primary_role})]})]}),(0,b.jsx)(e.CardContent,{children:(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsxs)("span",{className:"text-muted-foreground",children:["K/D: ",a.kd_ratio]}),(0,b.jsx)(q.default,{href:`/player/${a.player_id}`,className:"text-primary hover:underline",children:"View Profile"})]})})]},a.player_id))})]},a)):(0,b.jsx)(e.Card,{className:"border-dashed border-white/10 bg-white/5",children:(0,b.jsxs)(e.CardContent,{className:"flex flex-col items-center justify-center p-8 text-center",children:[(0,b.jsx)(w.Users,{className:"mb-4 h-8 w-8 text-muted-foreground"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"No players in your roster yet."}),(0,b.jsx)(d.Button,{asChild:!0,variant:"link",className:"mt-2 text-primary",children:(0,b.jsx)(q.default,{href:"/recruitments/manage",children:"Review Applications"})})]})})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)(e.Card,{className:"border-white/10 bg-white/5 backdrop-blur-md",children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsx)(e.CardTitle,{children:"Post New Recruitment"}),(0,b.jsx)(e.CardDescription,{children:"Create a new listing to find players for your roster."})]}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)(d.Button,{asChild:!0,className:"w-full gap-2",children:(0,b.jsxs)(q.default,{href:"/recruitments/new",children:[(0,b.jsx)(v.Plus,{className:"h-4 w-4"}),"Post Recruitment"]})})})]}),(0,b.jsxs)(e.Card,{className:"border-white/10 bg-white/5 backdrop-blur-md",children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsx)(e.CardTitle,{children:"Manage Applications"}),(0,b.jsx)(e.CardDescription,{children:"Review and shortlist applicants for your open roles."})]}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)(d.Button,{asChild:!0,variant:"secondary",className:"w-full gap-2",children:(0,b.jsxs)(q.default,{href:"/recruitments/manage",children:["View Applications ",(0,b.jsx)(t,{className:"h-4 w-4"})]})})})]})]})]}):(0,b.jsxs)(e.Card,{className:"border-primary/50 bg-primary/5",children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsx)(e.CardTitle,{className:"text-primary",children:"Register Your Team"}),(0,b.jsx)(e.CardDescription,{children:"Create your team profile to start recruiting players."})]}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)(d.Button,{asChild:!0,className:"w-full gap-2",children:(0,b.jsxs)(q.default,{href:"/team/setup",children:["Register Team ",(0,b.jsx)(t,{className:"h-4 w-4"})]})})})]})}var y=a.i(58929);function z(){let{user:a,profile:c,signOut:e,loading:g}=(0,f.useAuth)(),h=(0,y.useRouter)(),i=async()=>{await e(),h.push("/login")};return g?(0,b.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,b.jsx)("p",{className:"text-muted-foreground",children:"Loading..."})}):a?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"flex justify-end",children:(0,b.jsx)(d.Button,{variant:"ghost",size:"sm",onClick:i,className:"text-muted-foreground hover:text-destructive",children:"Sign Out"})}),c?.user_type==="player"?(0,b.jsx)(s,{}):(0,b.jsx)(x,{})]}):(h.push("/login"),null)}a.s(["default",()=>z],65447)}];

//# sourceMappingURL=rosterup-web_src_app_%28dashboard%29_dashboard_page_tsx_17f0f4e8._.js.map