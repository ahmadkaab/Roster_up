{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Roster_up/rosterup-web/src/actions/friends.ts"],"sourcesContent":["\"use server\";\r\n\r\nimport { createClient } from \"@/lib/supabase/server\";\r\nimport { revalidatePath } from \"next/cache\";\r\n\r\nexport async function sendFriendRequest(friendId: string) {\r\n  const supabase = await createClient();\r\n  const { data: { user } } = await supabase.auth.getUser();\r\n\r\n  if (!user) throw new Error(\"Unauthorized\");\r\n\r\n  // Check if request already exists (in either direction)\r\n  const { data: existing } = await supabase\r\n    .from(\"friendships\")\r\n    .select(\"*\")\r\n    .or(`and(user_id.eq.${user.id},friend_id.eq.${friendId}),and(user_id.eq.${friendId},friend_id.eq.${user.id})`)\r\n    .single();\r\n\r\n  if (existing) {\r\n    if (existing.status === 'accepted') throw new Error(\"Already friends\");\r\n    if (existing.status === 'pending') throw new Error(\"Request already pending\");\r\n    if (existing.status === 'blocked') throw new Error(\"Cannot send request\");\r\n  }\r\n\r\n  const { error } = await supabase\r\n    .from(\"friendships\")\r\n    .insert({\r\n      user_id: user.id,\r\n      friend_id: friendId,\r\n      status: \"pending\",\r\n    });\r\n\r\n  if (error) throw error;\r\n  revalidatePath(\"/dashboard\");\r\n  revalidatePath(`/player/${friendId}`);\r\n}\r\n\r\nexport async function acceptFriendRequest(friendshipId: string) {\r\n  const supabase = await createClient();\r\n  const { data: { user } } = await supabase.auth.getUser();\r\n\r\n  if (!user) throw new Error(\"Unauthorized\");\r\n\r\n  const { error } = await supabase\r\n    .from(\"friendships\")\r\n    .update({ status: \"accepted\", updated_at: new Date().toISOString() })\r\n    .eq(\"id\", friendshipId)\r\n    .eq(\"friend_id\", user.id); // Only the recipient can accept\r\n\r\n  if (error) throw error;\r\n  revalidatePath(\"/dashboard\");\r\n}\r\n\r\nexport async function rejectFriendRequest(friendshipId: string) {\r\n  const supabase = await createClient();\r\n  const { data: { user } } = await supabase.auth.getUser();\r\n\r\n  if (!user) throw new Error(\"Unauthorized\");\r\n\r\n  const { error } = await supabase\r\n    .from(\"friendships\")\r\n    .update({ status: \"rejected\", updated_at: new Date().toISOString() })\r\n    .eq(\"id\", friendshipId)\r\n    .eq(\"friend_id\", user.id);\r\n\r\n  if (error) throw error;\r\n  revalidatePath(\"/dashboard\");\r\n}\r\n\r\nexport async function removeFriend(friendshipId: string) {\r\n  const supabase = await createClient();\r\n  const { data: { user } } = await supabase.auth.getUser();\r\n\r\n  if (!user) throw new Error(\"Unauthorized\");\r\n\r\n  const { error } = await supabase\r\n    .from(\"friendships\")\r\n    .delete()\r\n    .eq(\"id\", friendshipId)\r\n    // Ensure user is part of the friendship\r\n    .or(`user_id.eq.${user.id},friend_id.eq.${user.id}`);\r\n\r\n  if (error) throw error;\r\n  revalidatePath(\"/dashboard\");\r\n}\r\n\r\nexport async function getFriends() {\r\n  const supabase = await createClient();\r\n  const { data: { user } } = await supabase.auth.getUser();\r\n\r\n  if (!user) return [];\r\n\r\n  const { data: friendships } = await supabase\r\n    .from(\"friendships\")\r\n    .select(`\r\n      id,\r\n      user_id,\r\n      friend_id,\r\n      status,\r\n      friend:friend_id(email), \r\n      user:user_id(email)\r\n    `) // Note: This assumes we can fetch email, but ideally we fetch profiles\r\n    .eq(\"status\", \"accepted\")\r\n    .or(`user_id.eq.${user.id},friend_id.eq.${user.id}`);\r\n\r\n  // We need to fetch profiles manually or via join if profiles table is linked\r\n  // For now, let's assume we need to fetch profiles separately or rely on what we have.\r\n  // A better approach is to fetch the profile of the \"other\" person.\r\n  \r\n  if (!friendships) return [];\r\n\r\n  const friendIds = friendships.map(f => f.user_id === user.id ? f.friend_id : f.user_id);\r\n  const friendshipMap = new Map(friendships.map(f => [\r\n    f.user_id === user.id ? f.friend_id : f.user_id, \r\n    f.id\r\n  ]));\r\n  \r\n  const { data: profiles } = await supabase\r\n    .from(\"player_cards\")\r\n    .select(\"player_id, ign, primary_role, game\")\r\n    .in(\"player_id\", friendIds);\r\n\r\n  return profiles?.map(p => ({\r\n    ...p,\r\n    friendship_id: friendshipMap.get(p.player_id)\r\n  })) || [];\r\n}\r\n\r\nexport async function getPendingRequests() {\r\n  const supabase = await createClient();\r\n  const { data: { user } } = await supabase.auth.getUser();\r\n\r\n  if (!user) return { incoming: [], outgoing: [] };\r\n\r\n  const { data: incoming } = await supabase\r\n    .from(\"friendships\")\r\n    .select(\"*, user:user_id(email)\") // Sender info\r\n    .eq(\"friend_id\", user.id)\r\n    .eq(\"status\", \"pending\");\r\n\r\n  const { data: outgoing } = await supabase\r\n    .from(\"friendships\")\r\n    .select(\"*, friend:friend_id(email)\") // Recipient info\r\n    .eq(\"user_id\", user.id)\r\n    .eq(\"status\", \"pending\");\r\n\r\n    // Fetch profiles for better display\r\n    const incomingIds = incoming?.map(f => f.user_id) || [];\r\n    const outgoingIds = outgoing?.map(f => f.friend_id) || [];\r\n\r\n    const { data: profiles } = await supabase\r\n        .from(\"player_cards\")\r\n        .select(\"player_id, ign\")\r\n        .in(\"player_id\", [...incomingIds, ...outgoingIds]);\r\n\r\n    const profileMap = new Map(profiles?.map(p => [p.player_id, p]));\r\n\r\n    const incomingWithProfiles = incoming?.map(req => ({\r\n        ...req,\r\n        sender_profile: profileMap.get(req.user_id)\r\n    }));\r\n\r\n    const outgoingWithProfiles = outgoing?.map(req => ({\r\n        ...req,\r\n        recipient_profile: profileMap.get(req.friend_id)\r\n    }));\r\n\r\n  return { incoming: incomingWithProfiles || [], outgoing: outgoingWithProfiles || [] };\r\n}\r\n"],"names":[],"mappings":";;;;;;;IAqCsB,sBAAA,WAAA,GAAA,IAAA,qQAAA,EAAA,8CAAA,0PAAA,EAAA,KAAA,GAAA,gQAAA,EAAA"}},
    {"offset": {"line": 19, "column": 0}, "map": {"version":3,"sources":["file:///D:/Roster_up/rosterup-web/src/actions/friends.ts"],"sourcesContent":["\"use server\";\r\n\r\nimport { createClient } from \"@/lib/supabase/server\";\r\nimport { revalidatePath } from \"next/cache\";\r\n\r\nexport async function sendFriendRequest(friendId: string) {\r\n  const supabase = await createClient();\r\n  const { data: { user } } = await supabase.auth.getUser();\r\n\r\n  if (!user) throw new Error(\"Unauthorized\");\r\n\r\n  // Check if request already exists (in either direction)\r\n  const { data: existing } = await supabase\r\n    .from(\"friendships\")\r\n    .select(\"*\")\r\n    .or(`and(user_id.eq.${user.id},friend_id.eq.${friendId}),and(user_id.eq.${friendId},friend_id.eq.${user.id})`)\r\n    .single();\r\n\r\n  if (existing) {\r\n    if (existing.status === 'accepted') throw new Error(\"Already friends\");\r\n    if (existing.status === 'pending') throw new Error(\"Request already pending\");\r\n    if (existing.status === 'blocked') throw new Error(\"Cannot send request\");\r\n  }\r\n\r\n  const { error } = await supabase\r\n    .from(\"friendships\")\r\n    .insert({\r\n      user_id: user.id,\r\n      friend_id: friendId,\r\n      status: \"pending\",\r\n    });\r\n\r\n  if (error) throw error;\r\n  revalidatePath(\"/dashboard\");\r\n  revalidatePath(`/player/${friendId}`);\r\n}\r\n\r\nexport async function acceptFriendRequest(friendshipId: string) {\r\n  const supabase = await createClient();\r\n  const { data: { user } } = await supabase.auth.getUser();\r\n\r\n  if (!user) throw new Error(\"Unauthorized\");\r\n\r\n  const { error } = await supabase\r\n    .from(\"friendships\")\r\n    .update({ status: \"accepted\", updated_at: new Date().toISOString() })\r\n    .eq(\"id\", friendshipId)\r\n    .eq(\"friend_id\", user.id); // Only the recipient can accept\r\n\r\n  if (error) throw error;\r\n  revalidatePath(\"/dashboard\");\r\n}\r\n\r\nexport async function rejectFriendRequest(friendshipId: string) {\r\n  const supabase = await createClient();\r\n  const { data: { user } } = await supabase.auth.getUser();\r\n\r\n  if (!user) throw new Error(\"Unauthorized\");\r\n\r\n  const { error } = await supabase\r\n    .from(\"friendships\")\r\n    .update({ status: \"rejected\", updated_at: new Date().toISOString() })\r\n    .eq(\"id\", friendshipId)\r\n    .eq(\"friend_id\", user.id);\r\n\r\n  if (error) throw error;\r\n  revalidatePath(\"/dashboard\");\r\n}\r\n\r\nexport async function removeFriend(friendshipId: string) {\r\n  const supabase = await createClient();\r\n  const { data: { user } } = await supabase.auth.getUser();\r\n\r\n  if (!user) throw new Error(\"Unauthorized\");\r\n\r\n  const { error } = await supabase\r\n    .from(\"friendships\")\r\n    .delete()\r\n    .eq(\"id\", friendshipId)\r\n    // Ensure user is part of the friendship\r\n    .or(`user_id.eq.${user.id},friend_id.eq.${user.id}`);\r\n\r\n  if (error) throw error;\r\n  revalidatePath(\"/dashboard\");\r\n}\r\n\r\nexport async function getFriends() {\r\n  const supabase = await createClient();\r\n  const { data: { user } } = await supabase.auth.getUser();\r\n\r\n  if (!user) return [];\r\n\r\n  const { data: friendships } = await supabase\r\n    .from(\"friendships\")\r\n    .select(`\r\n      id,\r\n      user_id,\r\n      friend_id,\r\n      status,\r\n      friend:friend_id(email), \r\n      user:user_id(email)\r\n    `) // Note: This assumes we can fetch email, but ideally we fetch profiles\r\n    .eq(\"status\", \"accepted\")\r\n    .or(`user_id.eq.${user.id},friend_id.eq.${user.id}`);\r\n\r\n  // We need to fetch profiles manually or via join if profiles table is linked\r\n  // For now, let's assume we need to fetch profiles separately or rely on what we have.\r\n  // A better approach is to fetch the profile of the \"other\" person.\r\n  \r\n  if (!friendships) return [];\r\n\r\n  const friendIds = friendships.map(f => f.user_id === user.id ? f.friend_id : f.user_id);\r\n  const friendshipMap = new Map(friendships.map(f => [\r\n    f.user_id === user.id ? f.friend_id : f.user_id, \r\n    f.id\r\n  ]));\r\n  \r\n  const { data: profiles } = await supabase\r\n    .from(\"player_cards\")\r\n    .select(\"player_id, ign, primary_role, game\")\r\n    .in(\"player_id\", friendIds);\r\n\r\n  return profiles?.map(p => ({\r\n    ...p,\r\n    friendship_id: friendshipMap.get(p.player_id)\r\n  })) || [];\r\n}\r\n\r\nexport async function getPendingRequests() {\r\n  const supabase = await createClient();\r\n  const { data: { user } } = await supabase.auth.getUser();\r\n\r\n  if (!user) return { incoming: [], outgoing: [] };\r\n\r\n  const { data: incoming } = await supabase\r\n    .from(\"friendships\")\r\n    .select(\"*, user:user_id(email)\") // Sender info\r\n    .eq(\"friend_id\", user.id)\r\n    .eq(\"status\", \"pending\");\r\n\r\n  const { data: outgoing } = await supabase\r\n    .from(\"friendships\")\r\n    .select(\"*, friend:friend_id(email)\") // Recipient info\r\n    .eq(\"user_id\", user.id)\r\n    .eq(\"status\", \"pending\");\r\n\r\n    // Fetch profiles for better display\r\n    const incomingIds = incoming?.map(f => f.user_id) || [];\r\n    const outgoingIds = outgoing?.map(f => f.friend_id) || [];\r\n\r\n    const { data: profiles } = await supabase\r\n        .from(\"player_cards\")\r\n        .select(\"player_id, ign\")\r\n        .in(\"player_id\", [...incomingIds, ...outgoingIds]);\r\n\r\n    const profileMap = new Map(profiles?.map(p => [p.player_id, p]));\r\n\r\n    const incomingWithProfiles = incoming?.map(req => ({\r\n        ...req,\r\n        sender_profile: profileMap.get(req.user_id)\r\n    }));\r\n\r\n    const outgoingWithProfiles = outgoing?.map(req => ({\r\n        ...req,\r\n        recipient_profile: profileMap.get(req.friend_id)\r\n    }));\r\n\r\n  return { incoming: incomingWithProfiles || [], outgoing: outgoingWithProfiles || [] };\r\n}\r\n"],"names":[],"mappings":";;;;;;;IAsFsB,aAAA,WAAA,GAAA,IAAA,qQAAA,EAAA,8CAAA,0PAAA,EAAA,KAAA,GAAA,gQAAA,EAAA"}},
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":["file:///D:/Roster_up/rosterup-web/src/actions/friends.ts"],"sourcesContent":["\"use server\";\r\n\r\nimport { createClient } from \"@/lib/supabase/server\";\r\nimport { revalidatePath } from \"next/cache\";\r\n\r\nexport async function sendFriendRequest(friendId: string) {\r\n  const supabase = await createClient();\r\n  const { data: { user } } = await supabase.auth.getUser();\r\n\r\n  if (!user) throw new Error(\"Unauthorized\");\r\n\r\n  // Check if request already exists (in either direction)\r\n  const { data: existing } = await supabase\r\n    .from(\"friendships\")\r\n    .select(\"*\")\r\n    .or(`and(user_id.eq.${user.id},friend_id.eq.${friendId}),and(user_id.eq.${friendId},friend_id.eq.${user.id})`)\r\n    .single();\r\n\r\n  if (existing) {\r\n    if (existing.status === 'accepted') throw new Error(\"Already friends\");\r\n    if (existing.status === 'pending') throw new Error(\"Request already pending\");\r\n    if (existing.status === 'blocked') throw new Error(\"Cannot send request\");\r\n  }\r\n\r\n  const { error } = await supabase\r\n    .from(\"friendships\")\r\n    .insert({\r\n      user_id: user.id,\r\n      friend_id: friendId,\r\n      status: \"pending\",\r\n    });\r\n\r\n  if (error) throw error;\r\n  revalidatePath(\"/dashboard\");\r\n  revalidatePath(`/player/${friendId}`);\r\n}\r\n\r\nexport async function acceptFriendRequest(friendshipId: string) {\r\n  const supabase = await createClient();\r\n  const { data: { user } } = await supabase.auth.getUser();\r\n\r\n  if (!user) throw new Error(\"Unauthorized\");\r\n\r\n  const { error } = await supabase\r\n    .from(\"friendships\")\r\n    .update({ status: \"accepted\", updated_at: new Date().toISOString() })\r\n    .eq(\"id\", friendshipId)\r\n    .eq(\"friend_id\", user.id); // Only the recipient can accept\r\n\r\n  if (error) throw error;\r\n  revalidatePath(\"/dashboard\");\r\n}\r\n\r\nexport async function rejectFriendRequest(friendshipId: string) {\r\n  const supabase = await createClient();\r\n  const { data: { user } } = await supabase.auth.getUser();\r\n\r\n  if (!user) throw new Error(\"Unauthorized\");\r\n\r\n  const { error } = await supabase\r\n    .from(\"friendships\")\r\n    .update({ status: \"rejected\", updated_at: new Date().toISOString() })\r\n    .eq(\"id\", friendshipId)\r\n    .eq(\"friend_id\", user.id);\r\n\r\n  if (error) throw error;\r\n  revalidatePath(\"/dashboard\");\r\n}\r\n\r\nexport async function removeFriend(friendshipId: string) {\r\n  const supabase = await createClient();\r\n  const { data: { user } } = await supabase.auth.getUser();\r\n\r\n  if (!user) throw new Error(\"Unauthorized\");\r\n\r\n  const { error } = await supabase\r\n    .from(\"friendships\")\r\n    .delete()\r\n    .eq(\"id\", friendshipId)\r\n    // Ensure user is part of the friendship\r\n    .or(`user_id.eq.${user.id},friend_id.eq.${user.id}`);\r\n\r\n  if (error) throw error;\r\n  revalidatePath(\"/dashboard\");\r\n}\r\n\r\nexport async function getFriends() {\r\n  const supabase = await createClient();\r\n  const { data: { user } } = await supabase.auth.getUser();\r\n\r\n  if (!user) return [];\r\n\r\n  const { data: friendships } = await supabase\r\n    .from(\"friendships\")\r\n    .select(`\r\n      id,\r\n      user_id,\r\n      friend_id,\r\n      status,\r\n      friend:friend_id(email), \r\n      user:user_id(email)\r\n    `) // Note: This assumes we can fetch email, but ideally we fetch profiles\r\n    .eq(\"status\", \"accepted\")\r\n    .or(`user_id.eq.${user.id},friend_id.eq.${user.id}`);\r\n\r\n  // We need to fetch profiles manually or via join if profiles table is linked\r\n  // For now, let's assume we need to fetch profiles separately or rely on what we have.\r\n  // A better approach is to fetch the profile of the \"other\" person.\r\n  \r\n  if (!friendships) return [];\r\n\r\n  const friendIds = friendships.map(f => f.user_id === user.id ? f.friend_id : f.user_id);\r\n  const friendshipMap = new Map(friendships.map(f => [\r\n    f.user_id === user.id ? f.friend_id : f.user_id, \r\n    f.id\r\n  ]));\r\n  \r\n  const { data: profiles } = await supabase\r\n    .from(\"player_cards\")\r\n    .select(\"player_id, ign, primary_role, game\")\r\n    .in(\"player_id\", friendIds);\r\n\r\n  return profiles?.map(p => ({\r\n    ...p,\r\n    friendship_id: friendshipMap.get(p.player_id)\r\n  })) || [];\r\n}\r\n\r\nexport async function getPendingRequests() {\r\n  const supabase = await createClient();\r\n  const { data: { user } } = await supabase.auth.getUser();\r\n\r\n  if (!user) return { incoming: [], outgoing: [] };\r\n\r\n  const { data: incoming } = await supabase\r\n    .from(\"friendships\")\r\n    .select(\"*, user:user_id(email)\") // Sender info\r\n    .eq(\"friend_id\", user.id)\r\n    .eq(\"status\", \"pending\");\r\n\r\n  const { data: outgoing } = await supabase\r\n    .from(\"friendships\")\r\n    .select(\"*, friend:friend_id(email)\") // Recipient info\r\n    .eq(\"user_id\", user.id)\r\n    .eq(\"status\", \"pending\");\r\n\r\n    // Fetch profiles for better display\r\n    const incomingIds = incoming?.map(f => f.user_id) || [];\r\n    const outgoingIds = outgoing?.map(f => f.friend_id) || [];\r\n\r\n    const { data: profiles } = await supabase\r\n        .from(\"player_cards\")\r\n        .select(\"player_id, ign\")\r\n        .in(\"player_id\", [...incomingIds, ...outgoingIds]);\r\n\r\n    const profileMap = new Map(profiles?.map(p => [p.player_id, p]));\r\n\r\n    const incomingWithProfiles = incoming?.map(req => ({\r\n        ...req,\r\n        sender_profile: profileMap.get(req.user_id)\r\n    }));\r\n\r\n    const outgoingWithProfiles = outgoing?.map(req => ({\r\n        ...req,\r\n        recipient_profile: profileMap.get(req.friend_id)\r\n    }));\r\n\r\n  return { incoming: incomingWithProfiles || [], outgoing: outgoingWithProfiles || [] };\r\n}\r\n"],"names":[],"mappings":";;;;;;;IAgIsB,qBAAA,WAAA,GAAA,IAAA,qQAAA,EAAA,8CAAA,0PAAA,EAAA,KAAA,GAAA,gQAAA,EAAA"}},
    {"offset": {"line": 49, "column": 0}, "map": {"version":3,"sources":["file:///D:/Roster_up/rosterup-web/src/actions/friends.ts"],"sourcesContent":["\"use server\";\r\n\r\nimport { createClient } from \"@/lib/supabase/server\";\r\nimport { revalidatePath } from \"next/cache\";\r\n\r\nexport async function sendFriendRequest(friendId: string) {\r\n  const supabase = await createClient();\r\n  const { data: { user } } = await supabase.auth.getUser();\r\n\r\n  if (!user) throw new Error(\"Unauthorized\");\r\n\r\n  // Check if request already exists (in either direction)\r\n  const { data: existing } = await supabase\r\n    .from(\"friendships\")\r\n    .select(\"*\")\r\n    .or(`and(user_id.eq.${user.id},friend_id.eq.${friendId}),and(user_id.eq.${friendId},friend_id.eq.${user.id})`)\r\n    .single();\r\n\r\n  if (existing) {\r\n    if (existing.status === 'accepted') throw new Error(\"Already friends\");\r\n    if (existing.status === 'pending') throw new Error(\"Request already pending\");\r\n    if (existing.status === 'blocked') throw new Error(\"Cannot send request\");\r\n  }\r\n\r\n  const { error } = await supabase\r\n    .from(\"friendships\")\r\n    .insert({\r\n      user_id: user.id,\r\n      friend_id: friendId,\r\n      status: \"pending\",\r\n    });\r\n\r\n  if (error) throw error;\r\n  revalidatePath(\"/dashboard\");\r\n  revalidatePath(`/player/${friendId}`);\r\n}\r\n\r\nexport async function acceptFriendRequest(friendshipId: string) {\r\n  const supabase = await createClient();\r\n  const { data: { user } } = await supabase.auth.getUser();\r\n\r\n  if (!user) throw new Error(\"Unauthorized\");\r\n\r\n  const { error } = await supabase\r\n    .from(\"friendships\")\r\n    .update({ status: \"accepted\", updated_at: new Date().toISOString() })\r\n    .eq(\"id\", friendshipId)\r\n    .eq(\"friend_id\", user.id); // Only the recipient can accept\r\n\r\n  if (error) throw error;\r\n  revalidatePath(\"/dashboard\");\r\n}\r\n\r\nexport async function rejectFriendRequest(friendshipId: string) {\r\n  const supabase = await createClient();\r\n  const { data: { user } } = await supabase.auth.getUser();\r\n\r\n  if (!user) throw new Error(\"Unauthorized\");\r\n\r\n  const { error } = await supabase\r\n    .from(\"friendships\")\r\n    .update({ status: \"rejected\", updated_at: new Date().toISOString() })\r\n    .eq(\"id\", friendshipId)\r\n    .eq(\"friend_id\", user.id);\r\n\r\n  if (error) throw error;\r\n  revalidatePath(\"/dashboard\");\r\n}\r\n\r\nexport async function removeFriend(friendshipId: string) {\r\n  const supabase = await createClient();\r\n  const { data: { user } } = await supabase.auth.getUser();\r\n\r\n  if (!user) throw new Error(\"Unauthorized\");\r\n\r\n  const { error } = await supabase\r\n    .from(\"friendships\")\r\n    .delete()\r\n    .eq(\"id\", friendshipId)\r\n    // Ensure user is part of the friendship\r\n    .or(`user_id.eq.${user.id},friend_id.eq.${user.id}`);\r\n\r\n  if (error) throw error;\r\n  revalidatePath(\"/dashboard\");\r\n}\r\n\r\nexport async function getFriends() {\r\n  const supabase = await createClient();\r\n  const { data: { user } } = await supabase.auth.getUser();\r\n\r\n  if (!user) return [];\r\n\r\n  const { data: friendships } = await supabase\r\n    .from(\"friendships\")\r\n    .select(`\r\n      id,\r\n      user_id,\r\n      friend_id,\r\n      status,\r\n      friend:friend_id(email), \r\n      user:user_id(email)\r\n    `) // Note: This assumes we can fetch email, but ideally we fetch profiles\r\n    .eq(\"status\", \"accepted\")\r\n    .or(`user_id.eq.${user.id},friend_id.eq.${user.id}`);\r\n\r\n  // We need to fetch profiles manually or via join if profiles table is linked\r\n  // For now, let's assume we need to fetch profiles separately or rely on what we have.\r\n  // A better approach is to fetch the profile of the \"other\" person.\r\n  \r\n  if (!friendships) return [];\r\n\r\n  const friendIds = friendships.map(f => f.user_id === user.id ? f.friend_id : f.user_id);\r\n  const friendshipMap = new Map(friendships.map(f => [\r\n    f.user_id === user.id ? f.friend_id : f.user_id, \r\n    f.id\r\n  ]));\r\n  \r\n  const { data: profiles } = await supabase\r\n    .from(\"player_cards\")\r\n    .select(\"player_id, ign, primary_role, game\")\r\n    .in(\"player_id\", friendIds);\r\n\r\n  return profiles?.map(p => ({\r\n    ...p,\r\n    friendship_id: friendshipMap.get(p.player_id)\r\n  })) || [];\r\n}\r\n\r\nexport async function getPendingRequests() {\r\n  const supabase = await createClient();\r\n  const { data: { user } } = await supabase.auth.getUser();\r\n\r\n  if (!user) return { incoming: [], outgoing: [] };\r\n\r\n  const { data: incoming } = await supabase\r\n    .from(\"friendships\")\r\n    .select(\"*, user:user_id(email)\") // Sender info\r\n    .eq(\"friend_id\", user.id)\r\n    .eq(\"status\", \"pending\");\r\n\r\n  const { data: outgoing } = await supabase\r\n    .from(\"friendships\")\r\n    .select(\"*, friend:friend_id(email)\") // Recipient info\r\n    .eq(\"user_id\", user.id)\r\n    .eq(\"status\", \"pending\");\r\n\r\n    // Fetch profiles for better display\r\n    const incomingIds = incoming?.map(f => f.user_id) || [];\r\n    const outgoingIds = outgoing?.map(f => f.friend_id) || [];\r\n\r\n    const { data: profiles } = await supabase\r\n        .from(\"player_cards\")\r\n        .select(\"player_id, ign\")\r\n        .in(\"player_id\", [...incomingIds, ...outgoingIds]);\r\n\r\n    const profileMap = new Map(profiles?.map(p => [p.player_id, p]));\r\n\r\n    const incomingWithProfiles = incoming?.map(req => ({\r\n        ...req,\r\n        sender_profile: profileMap.get(req.user_id)\r\n    }));\r\n\r\n    const outgoingWithProfiles = outgoing?.map(req => ({\r\n        ...req,\r\n        recipient_profile: profileMap.get(req.friend_id)\r\n    }));\r\n\r\n  return { incoming: incomingWithProfiles || [], outgoing: outgoingWithProfiles || [] };\r\n}\r\n"],"names":[],"mappings":";;;;;;;IAqDsB,sBAAA,WAAA,GAAA,IAAA,qQAAA,EAAA,8CAAA,0PAAA,EAAA,KAAA,GAAA,gQAAA,EAAA"}},
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":["file:///D:/Roster_up/rosterup-web/src/actions/friends.ts"],"sourcesContent":["\"use server\";\r\n\r\nimport { createClient } from \"@/lib/supabase/server\";\r\nimport { revalidatePath } from \"next/cache\";\r\n\r\nexport async function sendFriendRequest(friendId: string) {\r\n  const supabase = await createClient();\r\n  const { data: { user } } = await supabase.auth.getUser();\r\n\r\n  if (!user) throw new Error(\"Unauthorized\");\r\n\r\n  // Check if request already exists (in either direction)\r\n  const { data: existing } = await supabase\r\n    .from(\"friendships\")\r\n    .select(\"*\")\r\n    .or(`and(user_id.eq.${user.id},friend_id.eq.${friendId}),and(user_id.eq.${friendId},friend_id.eq.${user.id})`)\r\n    .single();\r\n\r\n  if (existing) {\r\n    if (existing.status === 'accepted') throw new Error(\"Already friends\");\r\n    if (existing.status === 'pending') throw new Error(\"Request already pending\");\r\n    if (existing.status === 'blocked') throw new Error(\"Cannot send request\");\r\n  }\r\n\r\n  const { error } = await supabase\r\n    .from(\"friendships\")\r\n    .insert({\r\n      user_id: user.id,\r\n      friend_id: friendId,\r\n      status: \"pending\",\r\n    });\r\n\r\n  if (error) throw error;\r\n  revalidatePath(\"/dashboard\");\r\n  revalidatePath(`/player/${friendId}`);\r\n}\r\n\r\nexport async function acceptFriendRequest(friendshipId: string) {\r\n  const supabase = await createClient();\r\n  const { data: { user } } = await supabase.auth.getUser();\r\n\r\n  if (!user) throw new Error(\"Unauthorized\");\r\n\r\n  const { error } = await supabase\r\n    .from(\"friendships\")\r\n    .update({ status: \"accepted\", updated_at: new Date().toISOString() })\r\n    .eq(\"id\", friendshipId)\r\n    .eq(\"friend_id\", user.id); // Only the recipient can accept\r\n\r\n  if (error) throw error;\r\n  revalidatePath(\"/dashboard\");\r\n}\r\n\r\nexport async function rejectFriendRequest(friendshipId: string) {\r\n  const supabase = await createClient();\r\n  const { data: { user } } = await supabase.auth.getUser();\r\n\r\n  if (!user) throw new Error(\"Unauthorized\");\r\n\r\n  const { error } = await supabase\r\n    .from(\"friendships\")\r\n    .update({ status: \"rejected\", updated_at: new Date().toISOString() })\r\n    .eq(\"id\", friendshipId)\r\n    .eq(\"friend_id\", user.id);\r\n\r\n  if (error) throw error;\r\n  revalidatePath(\"/dashboard\");\r\n}\r\n\r\nexport async function removeFriend(friendshipId: string) {\r\n  const supabase = await createClient();\r\n  const { data: { user } } = await supabase.auth.getUser();\r\n\r\n  if (!user) throw new Error(\"Unauthorized\");\r\n\r\n  const { error } = await supabase\r\n    .from(\"friendships\")\r\n    .delete()\r\n    .eq(\"id\", friendshipId)\r\n    // Ensure user is part of the friendship\r\n    .or(`user_id.eq.${user.id},friend_id.eq.${user.id}`);\r\n\r\n  if (error) throw error;\r\n  revalidatePath(\"/dashboard\");\r\n}\r\n\r\nexport async function getFriends() {\r\n  const supabase = await createClient();\r\n  const { data: { user } } = await supabase.auth.getUser();\r\n\r\n  if (!user) return [];\r\n\r\n  const { data: friendships } = await supabase\r\n    .from(\"friendships\")\r\n    .select(`\r\n      id,\r\n      user_id,\r\n      friend_id,\r\n      status,\r\n      friend:friend_id(email), \r\n      user:user_id(email)\r\n    `) // Note: This assumes we can fetch email, but ideally we fetch profiles\r\n    .eq(\"status\", \"accepted\")\r\n    .or(`user_id.eq.${user.id},friend_id.eq.${user.id}`);\r\n\r\n  // We need to fetch profiles manually or via join if profiles table is linked\r\n  // For now, let's assume we need to fetch profiles separately or rely on what we have.\r\n  // A better approach is to fetch the profile of the \"other\" person.\r\n  \r\n  if (!friendships) return [];\r\n\r\n  const friendIds = friendships.map(f => f.user_id === user.id ? f.friend_id : f.user_id);\r\n  const friendshipMap = new Map(friendships.map(f => [\r\n    f.user_id === user.id ? f.friend_id : f.user_id, \r\n    f.id\r\n  ]));\r\n  \r\n  const { data: profiles } = await supabase\r\n    .from(\"player_cards\")\r\n    .select(\"player_id, ign, primary_role, game\")\r\n    .in(\"player_id\", friendIds);\r\n\r\n  return profiles?.map(p => ({\r\n    ...p,\r\n    friendship_id: friendshipMap.get(p.player_id)\r\n  })) || [];\r\n}\r\n\r\nexport async function getPendingRequests() {\r\n  const supabase = await createClient();\r\n  const { data: { user } } = await supabase.auth.getUser();\r\n\r\n  if (!user) return { incoming: [], outgoing: [] };\r\n\r\n  const { data: incoming } = await supabase\r\n    .from(\"friendships\")\r\n    .select(\"*, user:user_id(email)\") // Sender info\r\n    .eq(\"friend_id\", user.id)\r\n    .eq(\"status\", \"pending\");\r\n\r\n  const { data: outgoing } = await supabase\r\n    .from(\"friendships\")\r\n    .select(\"*, friend:friend_id(email)\") // Recipient info\r\n    .eq(\"user_id\", user.id)\r\n    .eq(\"status\", \"pending\");\r\n\r\n    // Fetch profiles for better display\r\n    const incomingIds = incoming?.map(f => f.user_id) || [];\r\n    const outgoingIds = outgoing?.map(f => f.friend_id) || [];\r\n\r\n    const { data: profiles } = await supabase\r\n        .from(\"player_cards\")\r\n        .select(\"player_id, ign\")\r\n        .in(\"player_id\", [...incomingIds, ...outgoingIds]);\r\n\r\n    const profileMap = new Map(profiles?.map(p => [p.player_id, p]));\r\n\r\n    const incomingWithProfiles = incoming?.map(req => ({\r\n        ...req,\r\n        sender_profile: profileMap.get(req.user_id)\r\n    }));\r\n\r\n    const outgoingWithProfiles = outgoing?.map(req => ({\r\n        ...req,\r\n        recipient_profile: profileMap.get(req.friend_id)\r\n    }));\r\n\r\n  return { incoming: incomingWithProfiles || [], outgoing: outgoingWithProfiles || [] };\r\n}\r\n"],"names":[],"mappings":";;;;;;;IAqEsB,eAAA,WAAA,GAAA,IAAA,qQAAA,EAAA,8CAAA,0PAAA,EAAA,KAAA,GAAA,gQAAA,EAAA"}},
    {"offset": {"line": 79, "column": 0}, "map": {"version":3,"sources":["file:///D:/Roster_up/rosterup-web/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Card = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\r\n      \"rounded-xl border border-white/10 bg-white/5 text-card-foreground shadow-sm backdrop-blur-md\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nCard.displayName = \"Card\"\r\n\r\nconst CardHeader = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\r\n    {...props}\r\n  />\r\n))\r\nCardHeader.displayName = \"CardHeader\"\r\n\r\nconst CardTitle = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLHeadingElement>\r\n>(({ className, ...props }, ref) => (\r\n  <h3\r\n    ref={ref}\r\n    className={cn(\r\n      \"text-2xl font-semibold leading-none tracking-tight\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nCardTitle.displayName = \"CardTitle\"\r\n\r\nconst CardDescription = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLParagraphElement>\r\n>(({ className, ...props }, ref) => (\r\n  <p\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nCardDescription.displayName = \"CardDescription\"\r\n\r\nconst CardContent = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\r\n))\r\nCardContent.displayName = \"CardContent\"\r\n\r\nconst CardFooter = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex items-center p-6 pt-0\", className)}\r\n    {...props}\r\n  />\r\n))\r\nCardFooter.displayName = \"CardFooter\"\r\n\r\nexport { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle }\r\n\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,8LAAgB,MAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,gNAAC;QACC,KAAK;QACL,WAAW,IAAA,+IAAE,EACX,gGACA;QAED,GAAG,KAAK;;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,8LAAgB,OAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,gNAAC;QACC,KAAK;QACL,WAAW,IAAA,+IAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,8LAAgB,OAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,gNAAC;QACC,KAAK;QACL,WAAW,IAAA,+IAAE,EACX,sDACA;QAED,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,8LAAgB,OAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,gNAAC;QACC,KAAK;QACL,WAAW,IAAA,+IAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,8LAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,gNAAC;QAAI,KAAK;QAAK,WAAW,IAAA,+IAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,8LAAgB,QAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,gNAAC;QACC,KAAK;QACL,WAAW,IAAA,+IAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG"}},
    {"offset": {"line": 186, "column": 0}, "map": {"version":3,"sources":["file:///D:/Roster_up/rosterup-web/src/components/ui/skeleton.tsx"],"sourcesContent":["import { cn } from \"@/lib/utils\"\r\n\r\nfunction Skeleton({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) {\r\n  return (\r\n    <div\r\n      className={cn(\"animate-pulse rounded-md bg-white/10\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Skeleton }\r\n"],"names":[],"mappings":";;;;;AAAA;;;AAEA,SAAS,SAAS,EAChB,SAAS,EACT,GAAG,OACkC;IACrC,qBACE,gNAAC;QACC,WAAW,IAAA,+IAAE,EAAC,wCAAwC;QACrD,GAAG,KAAK;;;;;;AAGf;KAVS"}},
    {"offset": {"line": 215, "column": 0}, "map": {"version":3,"sources":["file:///D:/Roster_up/rosterup-web/src/components/friends/FriendsList.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { acceptFriendRequest, getFriends, getPendingRequests, rejectFriendRequest, removeFriend } from \"@/actions/friends\";\r\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Skeleton } from \"@/components/ui/skeleton\";\r\nimport { useToast } from \"@/contexts/ToastContext\";\r\nimport { Check, User, UserMinus, X } from \"lucide-react\";\r\nimport Link from \"next/link\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\ntype Friend = {\r\n  player_id: string;\r\n  ign: string;\r\n  primary_role?: string;\r\n  game?: string;\r\n};\r\n\r\ntype Request = {\r\n  id: string;\r\n  user_id: string;\r\n  friend_id: string;\r\n  status: string;\r\n  sender_profile?: { ign: string };\r\n  recipient_profile?: { ign: string };\r\n};\r\n\r\nexport function FriendsList() {\r\n  const [friends, setFriends] = useState<Friend[]>([]);\r\n  const [requests, setRequests] = useState<{ incoming: Request[]; outgoing: Request[] }>({ incoming: [], outgoing: [] });\r\n  const [loading, setLoading] = useState(true);\r\n  const { toast } = useToast();\r\n\r\n  const fetchData = async () => {\r\n    try {\r\n      const [friendsData, requestsData] = await Promise.all([\r\n        getFriends(),\r\n        getPendingRequests(),\r\n      ]);\r\n      setFriends(friendsData as any);\r\n      setRequests(requestsData as any);\r\n    } catch (error) {\r\n      console.error(\"Error fetching friends:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, []);\r\n\r\n  const handleAccept = async (id: string) => {\r\n    try {\r\n      await acceptFriendRequest(id);\r\n      toast(\"Friend request accepted!\", \"success\");\r\n      fetchData();\r\n    } catch (error) {\r\n      toast(\"Failed to accept request\", \"error\");\r\n    }\r\n  };\r\n\r\n  const handleReject = async (id: string) => {\r\n    try {\r\n      await rejectFriendRequest(id);\r\n      toast(\"Friend request rejected\", \"info\");\r\n      fetchData();\r\n    } catch (error) {\r\n      toast(\"Failed to reject request\", \"error\");\r\n    }\r\n  };\r\n\r\n  const handleRemove = async (id: string) => {\r\n    try {\r\n      await removeFriend(id);\r\n      toast(\"Friend removed\", \"info\");\r\n      fetchData();\r\n    } catch (error) {\r\n      toast(\"Failed to remove friend\", \"error\");\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return <FriendsSkeleton />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Pending Requests */}\r\n      {requests.incoming.length > 0 && (\r\n        <Card className=\"border-accent/20 bg-accent/5 backdrop-blur-md\">\r\n          <CardHeader>\r\n            <CardTitle className=\"text-lg text-accent\">Friend Requests</CardTitle>\r\n            <CardDescription>People who want to join your squad.</CardDescription>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-4\">\r\n            {requests.incoming.map((req) => (\r\n              <div key={req.id} className=\"flex items-center justify-between rounded-lg bg-black/20 p-3\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <Avatar className=\"h-10 w-10 border border-accent/20\">\r\n                    <AvatarFallback className=\"bg-accent/10 text-accent\">\r\n                      {req.sender_profile?.ign?.slice(0, 2).toUpperCase() || \"??\"}\r\n                    </AvatarFallback>\r\n                  </Avatar>\r\n                  <div>\r\n                    <p className=\"font-medium text-white\">{req.sender_profile?.ign || \"Unknown User\"}</p>\r\n                    <p className=\"text-xs text-muted-foreground\">Wants to be friends</p>\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex gap-2\">\r\n                  <Button size=\"sm\" variant=\"ghost\" onClick={() => handleReject(req.id)} className=\"h-8 w-8 p-0 text-destructive hover:bg-destructive/10 hover:text-destructive\">\r\n                    <X className=\"h-4 w-4\" />\r\n                  </Button>\r\n                  <Button size=\"sm\" onClick={() => handleAccept(req.id)} className=\"h-8 w-8 p-0 bg-accent text-accent-foreground hover:bg-accent/90\">\r\n                    <Check className=\"h-4 w-4\" />\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      {/* Friends List */}\r\n      <Card className=\"border-white/10 bg-white/5 backdrop-blur-md\">\r\n        <CardHeader>\r\n          <CardTitle className=\"flex items-center justify-between\">\r\n            <span>My Friends</span>\r\n            <span className=\"text-sm font-normal text-muted-foreground\">{friends.length} Friends</span>\r\n          </CardTitle>\r\n        </CardHeader>\r\n        <CardContent>\r\n          {friends.length > 0 ? (\r\n            <div className=\"grid gap-4 md:grid-cols-2\">\r\n              {friends.map((friend) => (\r\n                <div key={friend.player_id} className=\"flex items-center justify-between rounded-lg border border-white/5 bg-white/5 p-3 transition-colors hover:bg-white/10\">\r\n                  <Link href={`/player/${friend.player_id}`} className=\"flex items-center gap-3\">\r\n                    <Avatar className=\"h-10 w-10 border border-primary/20\">\r\n                      <AvatarFallback>{friend.ign?.substring(0, 2).toUpperCase()}</AvatarFallback>\r\n                    </Avatar>\r\n                    <div>\r\n                      <p className=\"font-medium text-white\">{friend.ign}</p>\r\n                      <p className=\"text-xs text-muted-foreground\">Online</p>\r\n                    </div>\r\n                  </Link>\r\n                  <div className=\"flex gap-2\">\r\n                    <Button asChild variant=\"ghost\" size=\"icon\">\r\n                      <Link href={`/chat/${friend.player_id}`}>\r\n                        <User className=\"h-4 w-4\" />\r\n                      </Link>\r\n                    </Button>\r\n                    <Button\r\n                      variant=\"ghost\"\r\n                      size=\"icon\"\r\n                      className=\"text-destructive hover:bg-destructive/10 hover:text-destructive\"\r\n                      onClick={() => handleRemove(friend.player_id)} // Assuming we need friendship ID here, but using player_id for now as per previous context\r\n                    >\r\n                      <UserMinus className=\"h-4 w-4\" />\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          ) : (\r\n            <div className=\"flex flex-col items-center justify-center py-8 text-center text-muted-foreground\">\r\n              <User className=\"mb-2 h-8 w-8 opacity-50\" />\r\n              <p>No friends yet.</p>\r\n              <p className=\"text-sm\">Connect with players to build your network.</p>\r\n            </div>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction FriendsSkeleton() {\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <Skeleton className=\"h-32 w-full rounded-xl\" />\r\n      <Skeleton className=\"h-64 w-full rounded-xl\" />\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;;;AAVA;;;;;;;;;;AA4BO,SAAS;;IACd,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,4LAAQ,EAAW,EAAE;IACnD,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,4LAAQ,EAA+C;QAAE,UAAU,EAAE;QAAE,UAAU,EAAE;IAAC;IACpH,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,4LAAQ,EAAC;IACvC,MAAM,EAAE,KAAK,EAAE,GAAG,IAAA,kKAAQ;IAE1B,MAAM,YAAY;QAChB,IAAI;YACF,MAAM,CAAC,aAAa,aAAa,GAAG,MAAM,QAAQ,GAAG,CAAC;gBACpD,IAAA,0LAAU;gBACV,IAAA,kMAAkB;aACnB;YACD,WAAW;YACX,YAAY;QACd,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,2BAA2B;QAC3C,SAAU;YACR,WAAW;QACb;IACF;IAEA,IAAA,6LAAS;iCAAC;YACR;QACF;gCAAG,EAAE;IAEL,MAAM,eAAe,OAAO;QAC1B,IAAI;YACF,MAAM,IAAA,mMAAmB,EAAC;YAC1B,MAAM,4BAA4B;YAClC;QACF,EAAE,OAAO,OAAO;YACd,MAAM,4BAA4B;QACpC;IACF;IAEA,MAAM,eAAe,OAAO;QAC1B,IAAI;YACF,MAAM,IAAA,mMAAmB,EAAC;YAC1B,MAAM,2BAA2B;YACjC;QACF,EAAE,OAAO,OAAO;YACd,MAAM,4BAA4B;QACpC;IACF;IAEA,MAAM,eAAe,OAAO;QAC1B,IAAI;YACF,MAAM,IAAA,4LAAY,EAAC;YACnB,MAAM,kBAAkB;YACxB;QACF,EAAE,OAAO,OAAO;YACd,MAAM,2BAA2B;QACnC;IACF;IAEA,IAAI,SAAS;QACX,qBAAO,gNAAC;;;;;IACV;IAEA,qBACE,gNAAC;QAAI,WAAU;;YAEZ,SAAS,QAAQ,CAAC,MAAM,GAAG,mBAC1B,gNAAC,8JAAI;gBAAC,WAAU;;kCACd,gNAAC,oKAAU;;0CACT,gNAAC,mKAAS;gCAAC,WAAU;0CAAsB;;;;;;0CAC3C,gNAAC,yKAAe;0CAAC;;;;;;;;;;;;kCAEnB,gNAAC,qKAAW;wBAAC,WAAU;kCACpB,SAAS,QAAQ,CAAC,GAAG,CAAC,CAAC,oBACtB,gNAAC;gCAAiB,WAAU;;kDAC1B,gNAAC;wCAAI,WAAU;;0DACb,gNAAC,kKAAM;gDAAC,WAAU;0DAChB,cAAA,gNAAC,0KAAc;oDAAC,WAAU;8DACvB,IAAI,cAAc,EAAE,KAAK,MAAM,GAAG,GAAG,iBAAiB;;;;;;;;;;;0DAG3D,gNAAC;;kEACC,gNAAC;wDAAE,WAAU;kEAA0B,IAAI,cAAc,EAAE,OAAO;;;;;;kEAClE,gNAAC;wDAAE,WAAU;kEAAgC;;;;;;;;;;;;;;;;;;kDAGjD,gNAAC;wCAAI,WAAU;;0DACb,gNAAC,kKAAM;gDAAC,MAAK;gDAAK,SAAQ;gDAAQ,SAAS,IAAM,aAAa,IAAI,EAAE;gDAAG,WAAU;0DAC/E,cAAA,gNAAC,uNAAC;oDAAC,WAAU;;;;;;;;;;;0DAEf,gNAAC,kKAAM;gDAAC,MAAK;gDAAK,SAAS,IAAM,aAAa,IAAI,EAAE;gDAAG,WAAU;0DAC/D,cAAA,gNAAC,mOAAK;oDAAC,WAAU;;;;;;;;;;;;;;;;;;+BAjBb,IAAI,EAAE;;;;;;;;;;;;;;;;0BA2BxB,gNAAC,8JAAI;gBAAC,WAAU;;kCACd,gNAAC,oKAAU;kCACT,cAAA,gNAAC,mKAAS;4BAAC,WAAU;;8CACnB,gNAAC;8CAAK;;;;;;8CACN,gNAAC;oCAAK,WAAU;;wCAA6C,QAAQ,MAAM;wCAAC;;;;;;;;;;;;;;;;;;kCAGhF,gNAAC,qKAAW;kCACT,QAAQ,MAAM,GAAG,kBAChB,gNAAC;4BAAI,WAAU;sCACZ,QAAQ,GAAG,CAAC,CAAC,uBACZ,gNAAC;oCAA2B,WAAU;;sDACpC,gNAAC,6LAAI;4CAAC,MAAM,CAAC,QAAQ,EAAE,OAAO,SAAS,EAAE;4CAAE,WAAU;;8DACnD,gNAAC,kKAAM;oDAAC,WAAU;8DAChB,cAAA,gNAAC,0KAAc;kEAAE,OAAO,GAAG,EAAE,UAAU,GAAG,GAAG;;;;;;;;;;;8DAE/C,gNAAC;;sEACC,gNAAC;4DAAE,WAAU;sEAA0B,OAAO,GAAG;;;;;;sEACjD,gNAAC;4DAAE,WAAU;sEAAgC;;;;;;;;;;;;;;;;;;sDAGjD,gNAAC;4CAAI,WAAU;;8DACb,gNAAC,kKAAM;oDAAC,OAAO;oDAAC,SAAQ;oDAAQ,MAAK;8DACnC,cAAA,gNAAC,6LAAI;wDAAC,MAAM,CAAC,MAAM,EAAE,OAAO,SAAS,EAAE;kEACrC,cAAA,gNAAC,gOAAI;4DAAC,WAAU;;;;;;;;;;;;;;;;8DAGpB,gNAAC,kKAAM;oDACL,SAAQ;oDACR,MAAK;oDACL,WAAU;oDACV,SAAS,IAAM,aAAa,OAAO,SAAS;8DAE5C,cAAA,gNAAC,mPAAS;wDAAC,WAAU;;;;;;;;;;;;;;;;;;mCAtBjB,OAAO,SAAS;;;;;;;;;iDA6B9B,gNAAC;4BAAI,WAAU;;8CACb,gNAAC,gOAAI;oCAAC,WAAU;;;;;;8CAChB,gNAAC;8CAAE;;;;;;8CACH,gNAAC;oCAAE,WAAU;8CAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOrC;GAnJgB;;QAII,kKAAQ;;;KAJZ;AAqJhB,SAAS;IACP,qBACE,gNAAC;QAAI,WAAU;;0BACb,gNAAC,sKAAQ;gBAAC,WAAU;;;;;;0BACpB,gNAAC,sKAAQ;gBAAC,WAAU;;;;;;;;;;;;AAG1B;MAPS"}},
    {"offset": {"line": 691, "column": 0}, "map": {"version":3,"sources":["file:///D:/Roster_up/rosterup-web/src/components/ui/badge.tsx"],"sourcesContent":["import { cva, type VariantProps } from \"class-variance-authority\"\r\nimport * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst badgeVariants = cva(\r\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default:\r\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\r\n        secondary:\r\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n        destructive:\r\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\r\n        outline: \"text-foreground\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nexport interface BadgeProps\r\n  extends React.HTMLAttributes<HTMLDivElement>,\r\n    VariantProps<typeof badgeVariants> {}\r\n\r\nfunction Badge({ className, variant, ...props }: BadgeProps) {\r\n  return (\r\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\r\n  )\r\n}\r\n\r\nexport { Badge, badgeVariants }\r\n"],"names":[],"mappings":";;;;;;;AAAA;AAGA;;;;AAEA,MAAM,gBAAgB,IAAA,6LAAG,EACvB,0KACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SAAS;QACX;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAOF,SAAS,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAmB;IACzD,qBACE,gNAAC;QAAI,WAAW,IAAA,+IAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QAAa,GAAG,KAAK;;;;;;AAExE;KAJS"}},
    {"offset": {"line": 739, "column": 0}, "map": {"version":3,"sources":["file:///D:/Roster_up/rosterup-web/src/components/dashboard/PlayerDashboard.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { FriendsList } from \"@/components/friends/FriendsList\";\r\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { useAuth } from \"@/contexts/AuthContext\";\r\nimport { createClient } from \"@/lib/supabase/client\";\r\nimport { Crosshair, Edit, Gamepad2, Instagram, Swords, Trophy, User, Youtube } from \"lucide-react\";\r\nimport Link from \"next/link\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nexport function PlayerDashboard() {\r\n  const { user } = useAuth();\r\n  const [playerCard, setPlayerCard] = useState<any>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const supabase = createClient();\r\n\r\n  useEffect(() => {\r\n    async function fetchPlayerCard() {\r\n      if (!user) return;\r\n      const { data: cardData, error: cardError } = await supabase\r\n        .from(\"player_cards\")\r\n        .select(\"*, games(name)\")\r\n        .eq(\"player_id\", user.id)\r\n        .single();\r\n      \r\n      if (cardData) {\r\n        const { data: profileData } = await supabase\r\n          .from(\"profiles\")\r\n          .select(\"avatar_url\")\r\n          .eq(\"id\", user.id)\r\n          .single();\r\n          \r\n        setPlayerCard({ ...cardData, avatar_url: profileData?.avatar_url });\r\n      }\r\n      setLoading(false);\r\n    }\r\n    fetchPlayerCard();\r\n  }, [user, supabase]);\r\n\r\n  if (loading) {\r\n    return <div className=\"animate-pulse space-y-4\">\r\n      <div className=\"h-32 rounded-xl bg-white/5\" />\r\n      <div className=\"grid gap-4 md:grid-cols-2\">\r\n        <div className=\"h-40 rounded-xl bg-white/5\" />\r\n        <div className=\"h-40 rounded-xl bg-white/5\" />\r\n      </div>\r\n    </div>;\r\n  }\r\n\r\n  if (!playerCard) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center space-y-4 rounded-xl border border-dashed border-white/10 bg-white/5 p-8 text-center\">\r\n        <div className=\"rounded-full bg-primary/10 p-4\">\r\n          <Gamepad2 className=\"h-8 w-8 text-primary\" />\r\n        </div>\r\n        <h2 className=\"text-xl font-bold\">Create Your Player Card</h2>\r\n        <p className=\"max-w-md text-muted-foreground\">\r\n          To start applying for teams, you need to set up your player profile with your stats and roles.\r\n        </p>\r\n        <Link href=\"/profile/create\">\r\n          <Button>Create Profile</Button>\r\n        </Link>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Welcome Section */}\r\n      <div className=\"flex items-center justify-between rounded-xl border border-white/10 bg-gradient-to-r from-primary/20 to-accent/20 p-6\">\r\n        <div className=\"flex items-center gap-4\">\r\n          <Avatar className=\"h-16 w-16 border-2 border-white/20\">\r\n            <AvatarImage src={playerCard.avatar_url} />\r\n            <AvatarFallback className=\"text-lg\">{playerCard.ign?.slice(0, 2).toUpperCase()}</AvatarFallback>\r\n          </Avatar>\r\n          <div>\r\n            <h1 className=\"text-2xl font-bold text-white\">Welcome back, {playerCard.ign}!</h1>\r\n            <p className=\"text-white/80\">Ready to find your next team?</p>\r\n          </div>\r\n        </div>\r\n        <div className=\"flex gap-2\">\r\n          <Link href={`/player/${user?.id}`}>\r\n            <Button variant=\"outline\" className=\"border-white/20 bg-white/10 hover:bg-white/20\">\r\n              <User className=\"mr-2 h-4 w-4\" />\r\n              Public Profile\r\n            </Button>\r\n          </Link>\r\n          <Link href=\"/profile/create\">\r\n            <Button variant=\"outline\" className=\"border-white/20 bg-white/10 hover:bg-white/20\">\r\n              <Edit className=\"mr-2 h-4 w-4\" />\r\n              Edit Profile\r\n            </Button>\r\n          </Link>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Stats Grid */}\r\n      <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\r\n        <Card className=\"border-white/10 bg-white/5 backdrop-blur-md\">\r\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n            <CardTitle className=\"text-sm font-medium\">K/D Ratio</CardTitle>\r\n            <Swords className=\"h-4 w-4 text-accent\" />\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-2xl font-bold\">{playerCard.kd_ratio}</div>\r\n            <p className=\"text-xs text-muted-foreground\">Lifetime stats</p>\r\n          </CardContent>\r\n        </Card>\r\n        <Card className=\"border-white/10 bg-white/5 backdrop-blur-md\">\r\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n            <CardTitle className=\"text-sm font-medium\">Avg Damage</CardTitle>\r\n            <Crosshair className=\"h-4 w-4 text-primary\" />\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-2xl font-bold\">{playerCard.avg_damage}</div>\r\n            <p className=\"text-xs text-muted-foreground\">Per match</p>\r\n          </CardContent>\r\n        </Card>\r\n        <Card className=\"border-white/10 bg-white/5 backdrop-blur-md\">\r\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n            <CardTitle className=\"text-sm font-medium\">Primary Role</CardTitle>\r\n            <Gamepad2 className=\"h-4 w-4 text-green-500\" />\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-2xl font-bold\">{playerCard.primary_role}</div>\r\n            <p className=\"text-xs text-muted-foreground\">\r\n              {playerCard.secondary_role ? `+ ${playerCard.secondary_role}` : \"No secondary\"}\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n        <Card className=\"border-white/10 bg-white/5 backdrop-blur-md\">\r\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n            <CardTitle className=\"text-sm font-medium\">Experience</CardTitle>\r\n            <Trophy className=\"h-4 w-4 text-yellow-500\" />\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-2xl font-bold\">{playerCard.experience_years || 0} Years</div>\r\n            <p className=\"text-xs text-muted-foreground\">Competitive play</p>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      <div className=\"grid gap-6 md:grid-cols-2\">\r\n        {/* Achievements */}\r\n        <Card className=\"border-white/10 bg-white/5 backdrop-blur-md\">\r\n          <CardHeader>\r\n            <CardTitle>Achievements</CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"flex flex-wrap gap-2\">\r\n              {playerCard.achievements && playerCard.achievements.length > 0 ? (\r\n                playerCard.achievements.map((achievement: any, i: number) => (\r\n                  <Badge key={i} variant=\"secondary\" className=\"bg-yellow-500/10 text-yellow-500 hover:bg-yellow-500/20\">\r\n                    <Trophy className=\"mr-1 h-3 w-3\" />\r\n                    {typeof achievement === 'string' ? achievement : achievement.value}\r\n                  </Badge>\r\n                ))\r\n              ) : (\r\n                <p className=\"text-sm text-muted-foreground\">No achievements added yet.</p>\r\n              )}\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* Socials & Info */}\r\n        <Card className=\"border-white/10 bg-white/5 backdrop-blur-md\">\r\n          <CardHeader>\r\n            <CardTitle>Socials & Info</CardTitle>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-4\">\r\n            <div className=\"flex items-center gap-4\">\r\n              {playerCard.socials?.discord && (\r\n                <div className=\"flex items-center gap-2 text-sm\">\r\n                  <div className=\"rounded-full bg-[#5865F2]/20 p-2 text-[#5865F2]\">\r\n                    <Gamepad2 className=\"h-4 w-4\" />\r\n                  </div>\r\n                  <span>{playerCard.socials.discord}</span>\r\n                </div>\r\n              )}\r\n              {playerCard.socials?.instagram && (\r\n                <div className=\"flex items-center gap-2 text-sm\">\r\n                  <div className=\"rounded-full bg-[#E1306C]/20 p-2 text-[#E1306C]\">\r\n                    <Instagram className=\"h-4 w-4\" />\r\n                  </div>\r\n                  <span>{playerCard.socials.instagram}</span>\r\n                </div>\r\n              )}\r\n              {playerCard.socials?.youtube && (\r\n                <div className=\"flex items-center gap-2 text-sm\">\r\n                  <div className=\"rounded-full bg-[#FF0000]/20 p-2 text-[#FF0000]\">\r\n                    <Youtube className=\"h-4 w-4\" />\r\n                  </div>\r\n                  <a href={playerCard.socials.youtube} target=\"_blank\" rel=\"noreferrer\" className=\"hover:underline\">\r\n                    Channel\r\n                  </a>\r\n                </div>\r\n              )}\r\n            </div>\r\n            <div className=\"border-t border-white/10 pt-4\">\r\n               <div className=\"flex justify-between text-sm\">\r\n                  <span className=\"text-muted-foreground\">Device:</span>\r\n                  <span>{playerCard.device_model || \"Not specified\"}</span>\r\n               </div>\r\n               <div className=\"flex justify-between text-sm mt-2\">\r\n                  <span className=\"text-muted-foreground\">Availability:</span>\r\n                  <span>{playerCard.availability || \"Not specified\"}</span>\r\n               </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n\r\n\r\n      {/* Friends Section */}\r\n      <FriendsList />\r\n\r\n      {/* Actions */}\r\n      <div className=\"grid gap-4 md:grid-cols-2\">\r\n        <Link href=\"/tryouts\">\r\n          <Card className=\"group cursor-pointer border-white/10 bg-gradient-to-br from-primary/10 to-transparent transition-all hover:border-primary/50\">\r\n            <CardContent className=\"flex items-center justify-between p-6\">\r\n              <div>\r\n                <h3 className=\"font-semibold text-primary group-hover:underline\">Browse Tryouts</h3>\r\n                <p className=\"text-sm text-muted-foreground\">Find teams looking for players like you.</p>\r\n              </div>\r\n              <Swords className=\"h-8 w-8 text-primary opacity-50 transition-opacity group-hover:opacity-100\" />\r\n            </CardContent>\r\n          </Card>\r\n        </Link>\r\n        <Link href=\"/applications\">\r\n          <Card className=\"group cursor-pointer border-white/10 bg-gradient-to-br from-accent/10 to-transparent transition-all hover:border-accent/50\">\r\n            <CardContent className=\"flex items-center justify-between p-6\">\r\n              <div>\r\n                <h3 className=\"font-semibold text-accent group-hover:underline\">My Applications</h3>\r\n                <p className=\"text-sm text-muted-foreground\">Check the status of your applications.</p>\r\n              </div>\r\n              <div className=\"relative\">\r\n                <div className=\"absolute -right-1 -top-1 h-3 w-3 animate-ping rounded-full bg-accent opacity-50\" />\r\n                <div className=\"h-3 w-3 rounded-full bg-accent\" />\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1688, "column": 0}, "map": {"version":3,"sources":["file:///D:/Roster_up/rosterup-web/src/components/dashboard/TeamDashboard.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Skeleton } from \"@/components/ui/skeleton\";\r\nimport { useAuth } from \"@/contexts/AuthContext\";\r\nimport { createClient } from \"@/lib/supabase/client\";\r\nimport { ArrowRight, ClipboardList, Gamepad2, Plus, Trophy, Users } from \"lucide-react\";\r\nimport Link from \"next/link\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\ntype Team = {\r\n  id: string;\r\n  name: string;\r\n  tier: string;\r\n  region: string;\r\n  logo_url: string | null;\r\n};\r\n\r\ntype TeamStats = {\r\n  activeRecruitments: number;\r\n  pendingApplications: number;\r\n};\r\n\r\ntype RosterPlayer = {\r\n  player_id: string;\r\n  ign: string;\r\n  primary_role: string;\r\n  kd_ratio: number;\r\n  avg_damage: number;\r\n  game_name: string;\r\n};\r\n\r\nexport function TeamDashboard() {\r\n  const { user } = useAuth();\r\n  const [team, setTeam] = useState<Team | null>(null);\r\n  const [stats, setStats] = useState<TeamStats>({ activeRecruitments: 0, pendingApplications: 0 });\r\n  const [rosterByGame, setRosterByGame] = useState<Record<string, RosterPlayer[]>>({});\r\n  const [loading, setLoading] = useState(true);\r\n  const supabase = createClient();\r\n\r\n  useEffect(() => {\r\n    async function fetchTeamData() {\r\n      if (!user) return;\r\n\r\n      try {\r\n        // Fetch Team\r\n        const { data: teamData, error: teamError } = await supabase\r\n          .from(\"teams\")\r\n          .select(\"*\")\r\n          .eq(\"owner_id\", user.id)\r\n          .single();\r\n\r\n        if (teamError && teamError.code !== \"PGRST116\") {\r\n          console.error(\"Error fetching team:\", teamError);\r\n        }\r\n\r\n        if (teamData) {\r\n          setTeam(teamData);\r\n\r\n          // Fetch Stats\r\n          const { count: recruitmentCount } = await supabase\r\n            .from(\"recruitments\")\r\n            .select(\"*\", { count: \"exact\", head: true })\r\n            .eq(\"team_id\", teamData.id)\r\n            .eq(\"status\", \"open\");\r\n\r\n          // Fetch Recruitments to get IDs and Game Names\r\n          const { data: recruitments } = await supabase\r\n            .from(\"recruitments\")\r\n            .select(\"id, games(name)\")\r\n            .eq(\"team_id\", teamData.id);\r\n            \r\n          let applicationCount = 0;\r\n          \r\n          if (recruitments && recruitments.length > 0) {\r\n            const ids = recruitments.map(r => r.id);\r\n            \r\n            // Get Pending Applications Count\r\n            const { count } = await supabase\r\n              .from(\"recruitment_applications\")\r\n              .select(\"*\", { count: \"exact\", head: true })\r\n              .in(\"recruitment_id\", ids)\r\n              .eq(\"status\", \"pending\");\r\n            applicationCount = count || 0;\r\n\r\n            // Get Accepted Applications (Roster)\r\n            const { data: acceptedApps } = await supabase\r\n              .from(\"recruitment_applications\")\r\n              .select(\"*, player_cards(*)\")\r\n              .in(\"recruitment_id\", ids)\r\n              .eq(\"status\", \"selected\");\r\n\r\n            if (acceptedApps) {\r\n              const grouped: Record<string, RosterPlayer[]> = {};\r\n              \r\n              acceptedApps.forEach(app => {\r\n                const recruitment = recruitments.find(r => r.id === app.recruitment_id);\r\n                const gameName = (recruitment?.games as any)?.name || \"Unknown Game\";\r\n                \r\n                if (!grouped[gameName]) {\r\n                  grouped[gameName] = [];\r\n                }\r\n\r\n                if (app.player_cards) {\r\n                  grouped[gameName].push({\r\n                    player_id: app.player_cards.player_id,\r\n                    ign: app.player_cards.ign,\r\n                    primary_role: app.player_cards.primary_role,\r\n                    kd_ratio: app.player_cards.kd_ratio,\r\n                    avg_damage: app.player_cards.avg_damage,\r\n                    game_name: gameName,\r\n                  });\r\n                }\r\n              });\r\n              setRosterByGame(grouped);\r\n            }\r\n          }\r\n\r\n          setStats({\r\n            activeRecruitments: recruitmentCount || 0,\r\n            pendingApplications: applicationCount,\r\n          });\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error:\", error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n\r\n\r\n\r\n    fetchTeamData();\r\n  }, [user, supabase]);\r\n\r\n// ...\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"space-y-8\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div className=\"space-y-2\">\r\n            <Skeleton className=\"h-8 w-64\" />\r\n            <Skeleton className=\"h-4 w-48\" />\r\n          </div>\r\n          <div className=\"flex gap-2\">\r\n            <Skeleton className=\"h-10 w-32\" />\r\n            <Skeleton className=\"h-10 w-32\" />\r\n          </div>\r\n        </div>\r\n        <div className=\"grid gap-4 md:grid-cols-3\">\r\n          {[1, 2, 3].map((i) => (\r\n            <Skeleton key={i} className=\"h-32 rounded-xl\" />\r\n          ))}\r\n        </div>\r\n        <div className=\"space-y-6\">\r\n          <Skeleton className=\"h-8 w-48\" />\r\n          <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\r\n            {[1, 2, 3].map((i) => (\r\n              <Skeleton key={i} className=\"h-24 rounded-xl\" />\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!team) {\r\n    return (\r\n      <Card className=\"border-primary/50 bg-primary/5\">\r\n        <CardHeader>\r\n          <CardTitle className=\"text-primary\">Register Your Team</CardTitle>\r\n          <CardDescription>\r\n            Create your team profile to start recruiting players.\r\n          </CardDescription>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <Button asChild className=\"w-full gap-2\">\r\n            <Link href=\"/team/setup\">\r\n              Register Team <ArrowRight className=\"h-4 w-4\" />\r\n            </Link>\r\n          </Button>\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-8\">\r\n      {/* Welcome Section */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h2 className=\"text-3xl font-bold tracking-tight text-primary\">\r\n            {team.name} Dashboard \r\n          </h2>\r\n          <p className=\"text-muted-foreground\">\r\n            Manage your roster and find the best talent.\r\n          </p>\r\n        </div>\r\n        <div className=\"flex gap-2\">\r\n          <Button asChild variant=\"outline\" className=\"gap-2\">\r\n            <Link href={`/team/${team.id}`}>\r\n              <Users className=\"h-4 w-4\" />\r\n              Public Page\r\n            </Link>\r\n          </Button>\r\n          <Button asChild variant=\"outline\" className=\"gap-2\">\r\n            <Link href=\"/team/settings\">\r\n              Edit Team\r\n            </Link>\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Stats Overview */}\r\n      <div className=\"grid gap-4 md:grid-cols-3\">\r\n        <Card className=\"border-white/10 bg-white/5 backdrop-blur-md\">\r\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n            <CardTitle className=\"text-sm font-medium\">Active Recruitments</CardTitle>\r\n            <Users className=\"h-4 w-4 text-muted-foreground\" />\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-2xl font-bold text-primary\">\r\n              {stats.activeRecruitments}\r\n            </div>\r\n            <p className=\"text-xs text-muted-foreground\">Open positions</p>\r\n          </CardContent>\r\n        </Card>\r\n        <Card className=\"border-white/10 bg-white/5 backdrop-blur-md\">\r\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n            <CardTitle className=\"text-sm font-medium\">Pending Applications</CardTitle>\r\n            <ClipboardList className=\"h-4 w-4 text-muted-foreground\" />\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-2xl font-bold text-accent\">\r\n              {stats.pendingApplications}\r\n            </div>\r\n            <p className=\"text-xs text-muted-foreground\">Waiting for review</p>\r\n          </CardContent>\r\n        </Card>\r\n        <Card className=\"border-white/10 bg-white/5 backdrop-blur-md\">\r\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n            <CardTitle className=\"text-sm font-medium\">Team Tier</CardTitle>\r\n            <Trophy className=\"h-4 w-4 text-muted-foreground\" />\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-2xl font-bold capitalize\">\r\n              {team.tier}\r\n            </div>\r\n            <p className=\"text-xs text-muted-foreground\">{team.region}</p>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Active Roster */}\r\n      <div className=\"space-y-6\">\r\n        <h3 className=\"text-xl font-semibold text-white\">Active Roster</h3>\r\n        \r\n        {Object.keys(rosterByGame).length > 0 ? (\r\n          Object.entries(rosterByGame).map(([game, players]) => (\r\n            <div key={game} className=\"space-y-3\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <Badge variant=\"outline\" className=\"bg-primary/10 text-primary border-primary/20\">\r\n                  <Gamepad2 className=\"mr-1 h-3 w-3\" />\r\n                  {game}\r\n                </Badge>\r\n                <span className=\"text-sm text-muted-foreground\">{players.length} Players</span>\r\n              </div>\r\n              \r\n              <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\r\n                {players.map((player) => (\r\n                  <Card key={player.player_id} className=\"border-white/10 bg-white/5 backdrop-blur-md\">\r\n                    <CardHeader className=\"flex flex-row items-center gap-4\">\r\n                      <div className=\"flex h-10 w-10 items-center justify-center rounded-full bg-primary/20\">\r\n                        <Users className=\"h-5 w-5 text-primary\" />\r\n                      </div>\r\n                      <div>\r\n                        <CardTitle className=\"text-base\">{player.ign}</CardTitle>\r\n                        <CardDescription>{player.primary_role}</CardDescription>\r\n                      </div>\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                      <div className=\"flex justify-between text-sm\">\r\n                        <span className=\"text-muted-foreground\">K/D: {player.kd_ratio}</span>\r\n                        <Link href={`/player/${player.player_id}`} className=\"text-primary hover:underline\">\r\n                          View Profile\r\n                        </Link>\r\n                      </div>\r\n                    </CardContent>\r\n                  </Card>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          ))\r\n        ) : (\r\n          <Card className=\"border-dashed border-white/10 bg-white/5\">\r\n            <CardContent className=\"flex flex-col items-center justify-center p-8 text-center\">\r\n              <Users className=\"mb-4 h-8 w-8 text-muted-foreground\" />\r\n              <p className=\"text-muted-foreground\">No players in your roster yet.</p>\r\n              <Button asChild variant=\"link\" className=\"mt-2 text-primary\">\r\n                <Link href=\"/recruitments/manage\">Review Applications</Link>\r\n              </Button>\r\n            </CardContent>\r\n          </Card>\r\n        )}\r\n      </div>\r\n\r\n      {/* Action Cards */}\r\n      <div className=\"grid gap-4 md:grid-cols-2\">\r\n        <Card className=\"border-white/10 bg-white/5 backdrop-blur-md\">\r\n          <CardHeader>\r\n            <CardTitle>Post New Recruitment</CardTitle>\r\n            <CardDescription>\r\n              Create a new listing to find players for your roster.\r\n            </CardDescription>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <Button asChild className=\"w-full gap-2\">\r\n              <Link href=\"/recruitments/new\">\r\n                <Plus className=\"h-4 w-4\" />\r\n                Post Recruitment\r\n              </Link>\r\n            </Button>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card className=\"border-white/10 bg-white/5 backdrop-blur-md\">\r\n          <CardHeader>\r\n            <CardTitle>Manage Applications</CardTitle>\r\n            <CardDescription>\r\n              Review and shortlist applicants for your open roles.\r\n            </CardDescription>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <Button asChild variant=\"secondary\" className=\"w-full gap-2\">\r\n              <Link href=\"/recruitments/manage\">\r\n                View Applications <ArrowRight className=\"h-4 w-4\" />\r\n              </Link>\r\n            </Button>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2624, "column": 0}, "map": {"version":3,"sources":["file:///D:/Roster_up/rosterup-web/src/app/%28dashboard%29/dashboard/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { PlayerDashboard } from \"@/components/dashboard/PlayerDashboard\";\r\nimport { TeamDashboard } from \"@/components/dashboard/TeamDashboard\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { useAuth } from \"@/contexts/AuthContext\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\nexport default function DashboardPage() {\r\n  const { user, profile, signOut, loading } = useAuth();\r\n  const router = useRouter();\r\n\r\n  const handleSignOut = async () => {\r\n    await signOut();\r\n    router.push(\"/login\");\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-[400px]\">\r\n        <p className=\"text-muted-foreground\">Loading...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!user) {\r\n    router.push(\"/login\");\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Top Bar Actions */}\r\n      <div className=\"flex justify-end\">\r\n        <Button variant=\"ghost\" size=\"sm\" onClick={handleSignOut} className=\"text-muted-foreground hover:text-destructive\">\r\n          Sign Out\r\n        </Button>\r\n      </div>\r\n\r\n      {profile?.user_type === \"player\" ? (\r\n        <PlayerDashboard />\r\n      ) : (\r\n        <TeamDashboard />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;;;AANA;;;;;;AAQe,SAAS;;IACtB,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,GAAG,IAAA,gKAAO;IACnD,MAAM,SAAS,IAAA,qKAAS;IAExB,MAAM,gBAAgB;QACpB,MAAM;QACN,OAAO,IAAI,CAAC;IACd;IAEA,IAAI,SAAS;QACX,qBACE,gNAAC;YAAI,WAAU;sBACb,cAAA,gNAAC;gBAAE,WAAU;0BAAwB;;;;;;;;;;;IAG3C;IAEA,IAAI,CAAC,MAAM;QACT,OAAO,IAAI,CAAC;QACZ,OAAO;IACT;IAEA,qBACE,gNAAC;QAAI,WAAU;;0BAEb,gNAAC;gBAAI,WAAU;0BACb,cAAA,gNAAC,kKAAM;oBAAC,SAAQ;oBAAQ,MAAK;oBAAK,SAAS;oBAAe,WAAU;8BAA+C;;;;;;;;;;;YAKpH,SAAS,cAAc,yBACtB,gNAAC,2LAAe;;;;qCAEhB,gNAAC,uLAAa;;;;;;;;;;;AAItB;GAtCwB;;QACsB,gKAAO;QACpC,qKAAS;;;KAFF"}}]
}